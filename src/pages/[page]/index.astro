---
import Layout from "~layouts/Layout.astro";
import { getCollection, getEntry } from "astro:content";
import MarkdownContent from "~components/MarkdownContent.astro";

export async function getStaticPaths() {
    const allPages = await getCollection("page", ({ data }) => {
        return !data.draft;
    });

    return allPages
        .filter((page) => page.slug !== "homepage")
        .map((page) => ({
            params: {
                page: page.slug
            }
        }));
}

const { page } = Astro.params;

const entry = await getEntry("page", page);
const { Content } = await entry.render();
---

<Layout
    title={entry.data.name}
    description={entry.data.description}
    sideWidth="half"
    headerImage={entry.data.image}
>
    <MarkdownContent>
        <Content />
    </MarkdownContent>
</Layout>
